# 基于 TCP 的服务器端/客户端

## 理解 TCP 和 UDP

根据数据传输方式的不同，基于网络协议的套接字一般分为 TCP套接字 和 UDP 套接字。因为 TCP 是面向连接的，因此又称为 基于流（stream）的套接字。

TCP 是 Transmission Control Protocol （传输控制协议）的简写，意为“对数据传输过程的控制”。

### TCP/IP 协议栈

TCP/IP协议栈（Stack层）如图所示：

    应用层
  /        \
TCP层      UDP层
  \        /
     IP层
      |
    链路层

（数据通信中使用的协议栈分为 7 层，这里的 4 层对于理解TCP/IP协议就足够了）

### 链路层

链路层是物理链接领域标准化的结果，也是最基本的领域，专门定义 LAN，WLAN，MAN 等网络标准。链路层负责物理连接的标准。

### IP层

准备好物理连接后，为了在复杂的网络中传输数据，首先需要考虑路径的选择。该层就是IP层，使用的协议就是IP。

IP本身是**面向消息**的，不可靠的协议。每次传输数据时会帮我们选择路径，但并不一致。如果传输中发生路径错误，则选择其他路径；如果发生数据丢失或错误，则无法解决。换言之，IP协议无法对应数据错误。

## TCP/UDP层

IP层解决数据传输中的路径选择问题，只需照此路径传输数据即可。TCP 和 UDP 以 IP 层提供的路径信息为基础完成实际的数据传输，故该层又称传输层。

IP层只关心一个数据包（数据传输的基本单位）的传输过程。因此，即使输入多个数据包，每个数据包也是由 IP 层实际传输的，也就是说传输顺序和传输本身是不可靠的。

TCP 通过添加额外的对话方式，将不可靠的IP协议赋予可靠性。

## 应用层

编写软件的过程中，需要根据程序特点决定服务器端和客户端之间的数据传输规则（规定），这就是应用层协议。
